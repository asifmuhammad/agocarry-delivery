{"version":3,"sources":["webpack:///src/app/register/register.page.html","webpack:///src/app/register/register-routing.module.ts","webpack:///src/app/register/register.module.ts","webpack:///src/app/register/register.page.scss","webpack:///src/app/register/register.page.ts","webpack:///src/models/auth-signup-request.models.ts"],"names":["routes","path","component","RegisterPageRoutingModule","imports","forChild","exports","RegisterPageModule","declarations","RegisterPage","navCtrl","uiElementService","apiService","route","translate","alertCtrl","signUpRequest","changeHint","queryParams","subscribe","params","code","phone","name","email","length","countryCode","phoneNumber","getCountries","res","countries","clearPhoneSkip","country","callingCodes","countryCodeCountryText","get","value","phoneNumberHint","reg","presentToast","test","alertPhone","text","phoneNumberFull","formatPhone","create","header","message","buttons","role","handler","console","log","password","String","Math","floor","random","mobile_number","signUp","then","alert","present","presentLoading","createUser","dismissLoading","navigationExtras","user","navigateForward","err","errMsg","error","errors","presentErrorAlert","pop","selector","template","SignUpRequest","ROLE_DELIVERY"],"mappings":"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","file":"register-register-module-es5.js","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button text=\\\"\\\" icon=\\\"chevron-back-outline\\\"></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>{{'register_now' | translate}}</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content fullscreen>\\n    <div class=\\\"form\\\">\\n        <p class=\\\"ion-text-center\\\">{{'register_now_message' | translate}} <br>{{'register_now_message2' | translate}}\\n        </p>\\n\\n        <ion-list lines=\\\"none\\\">\\n            <ion-item lines=\\\"none\\\">\\n\\n                <div class=\\\"item_inner d-flex\\\">\\n                    <ion-icon class=\\\"zmdi zmdi-globe-alt ion-text-start\\\"></ion-icon>\\n\\n                    <ion-select mode=\\\"md\\\" [(ngModel)]=\\\"countryCode\\\" multiple=\\\"false\\\" [value]=\\\"countryCode\\\"\\n                        placeholder=\\\"{{'select_country' | translate}}\\\" [okText]=\\\"'okay' | translate\\\"\\n                        [cancelText]=\\\"'cancel' | translate\\\" (ionChange)=\\\"changeHint()\\\"\\n                        [selectedText]=\\\"countryCodeCountryText\\\">\\n                        <ion-select-option *ngFor=\\\"let country of countries\\\" [value]=\\\"country.callingCodes[0]\\\">\\n                            {{country.name}}\\n                        </ion-select-option>\\n                    </ion-select>\\n\\n                </div>\\n            </ion-item>\\n            <ion-item lines=\\\"none\\\">\\n                <div class=\\\"item_inner d-flex\\\">\\n                    <!--                    <ion-label position=\\\"fixed\\\">{{phoneNumberHint}}</ion-label>-->\\n                    <ion-icon class=\\\"zmdi  zmdi-smartphone-iphone ion-text-start\\\"></ion-icon>\\n                    <ion-input placeholder=\\\"{{phoneNumberHint}}\\\" type=\\\"tel\\\" [(ngModel)]=\\\"phoneNumber\\\"></ion-input>\\n                </div>\\n            </ion-item>\\n            <ion-item lines=\\\"none\\\">\\n                <div class=\\\"item_inner d-flex\\\">\\n                    <!--                 <ion-label position=\\\"fixed\\\">{{'full_name' | translate}}</ion-label>-->\\n                    <ion-icon class=\\\" zmdi zmdi-account ion-text-start\\\">\\n                    </ion-icon>\\n                    <ion-input placeholder=\\\"{{'full_name' | translate}}\\\" type=\\\"text\\\" [(ngModel)]=\\\"signUpRequest.name\\\">\\n                    </ion-input>\\n                </div>\\n            </ion-item>\\n            <ion-item lines=\\\"none\\\">\\n                <div class=\\\"item_inner d-flex\\\">\\n                    <!--                    <ion-label position=\\\"fixed\\\">{{'email_address' | translate}}</ion-label>-->\\n                    <ion-icon class=\\\"zmdi zmdi-email ion-text-start\\\"></ion-icon>\\n                    <ion-input placeholder=\\\"{{'email_address' | translate}}\\\" type=\\\"email\\\"\\n                        [(ngModel)]=\\\"signUpRequest.email\\\"></ion-input>\\n                </div>\\n            </ion-item>\\n            <ion-button size=\\\"large\\\" shape=\\\"block\\\" class=\\\"btn\\\" (click)=\\\"requestSignUp()\\\">\\n                {{'continue' | translate}}\\n            </ion-button>\\n        </ion-list>\\n        <h4 class=\\\"ion-text-center\\\" (click)=\\\"goBack()\\\">\\n            {{'back_to_sign_in' | translate}}\\n        </h4>\\n        <div class=\\\"form\\\">\\n            <p class=\\\"ion-text-center\\\">{{'will_send_an_otp_on_above' | translate}}\\n                <br>{{'given_phone_number' | translate}}\\n            </p>\\n        </div>\\n    </div>\\n\\n</ion-content>\\n\\n<!-- <ion-footer class=\\\"ion-no-border\\\">\\n\\t<div class=\\\"form\\\">\\n\\t\\t<p class=\\\"ion-text-center\\\">{{'will_send_an_otp_on_above' | translate}} <br>{{'given_phone_number' | translate}}\\n\\t\\t</p>\\n\\t</div>\\n</ion-footer> -->\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RegisterPage } from './register.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RegisterPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RegisterPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RegisterPageRoutingModule } from './register-routing.module';\n\nimport { RegisterPage } from './register.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n\tTranslateModule,\n    RegisterPageRoutingModule\n  ],\n  declarations: [RegisterPage]\n})\nexport class RegisterPageModule {}\n","export default \".form {\\n  padding-top: 50px;\\n}\\n.form ion-item {\\n  background: var(--info_field_bg);\\n}\\n.form ion-item.item-input ion-label {\\n  max-width: unset !important;\\n  width: -webkit-fit-content !important;\\n  width: -moz-fit-content !important;\\n  width: fit-content !important;\\n  min-width: -webkit-fit-content;\\n  min-width: -moz-fit-content;\\n  min-width: fit-content;\\n}\\n.form ion-item.item-select {\\n  padding: 2px 13px;\\n}\\n.form ion-item.item-select ion-label {\\n  display: none;\\n}\\n.form p {\\n  color: var(--text-light) !important;\\n  margin: 0;\\n  font-size: 1rem !important;\\n  letter-spacing: 0;\\n  font-weight: 500;\\n  line-height: 19px;\\n  margin-bottom: 50px;\\n  opacity: 0.8;\\n}\\n.form .button.btn.button-block {\\n  margin-top: 25px;\\n}\\n.form ion-list {\\n  margin-bottom: 28px;\\n}\\n.form h4 {\\n  margin: 0;\\n  font-size: 1rem;\\n  font-weight: 500;\\n}\\nion-footer .form {\\n  padding-top: 0px !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcmVnaXN0ZXIvRjpcXGZpdmVyXFxCZXJuYXJkXFxBZ29jYXJyeVxcYWdvY2FycnktZGVsaXZlcnkvc3JjXFxhcHBcXHJlZ2lzdGVyXFxyZWdpc3Rlci5wYWdlLnNjc3MiLCJzcmMvYXBwL3JlZ2lzdGVyL3JlZ2lzdGVyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFTQTtFQUNJLGlCQUFBO0FDUko7QURVSTtFQUNJLGdDQUFBO0FDUlI7QURZWTtFQUNJLDJCQUFBO0VBQ0EscUNBQUE7RUFBQSxrQ0FBQTtFQUFBLDZCQUFBO0VBQ0EsOEJBQUE7RUFBQSwyQkFBQTtFQUFBLHNCQUFBO0FDVmhCO0FEY1E7RUFDSSxpQkFBQTtBQ1paO0FEY1k7RUFDSSxhQUFBO0FDWmhCO0FEaUJJO0VBQ0ksbUNBQUE7RUFDQSxTQUFBO0VBQ0EsMEJBQUE7RUFDQSxpQkFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7QUNmUjtBRGtCSTtFQUNJLGdCQUFBO0FDaEJSO0FEbUJJO0VBQ0ksbUJBQUE7QUNqQlI7QURvQkk7RUFDSSxTQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0FDbEJSO0FEdUJJO0VBQ0ksMkJBQUE7QUNwQlIiLCJmaWxlIjoic3JjL2FwcC9yZWdpc3Rlci9yZWdpc3Rlci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIvL2lvbi1oZWFkZXIgaW9uLXRvb2xiYXIgaW9uLXRpdGxlIHtcbi8vICAgIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50O1xuLy8gICAgbGVmdDogMDtcbi8vICAgIHRvcDogMDtcbi8vICAgIHdpZHRoOiAxMDAlO1xuLy8gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuLy8gICAgcGFkZGluZzogMCAxNXB4ICFpbXBvcnRhbnQ7XG4vL31cblxuLmZvcm0ge1xuICAgIHBhZGRpbmctdG9wOiA1MHB4O1xuXG4gICAgaW9uLWl0ZW0ge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbmZvX2ZpZWxkX2JnKTtcbiAgICAgICAgLy8gICAgICAgIHBhZGRpbmc6IDJweCAyMHB4O1xuXG4gICAgICAgICYuaXRlbS1pbnB1dCB7XG4gICAgICAgICAgICBpb24tbGFiZWwge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogdW5zZXQgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICB3aWR0aDogZml0LWNvbnRlbnQgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IGZpdC1jb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgJi5pdGVtLXNlbGVjdCB7XG4gICAgICAgICAgICBwYWRkaW5nOiAycHggMTNweDtcblxuICAgICAgICAgICAgaW9uLWxhYmVsIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcCB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWxpZ2h0KSAhaW1wb3J0YW50O1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMXJlbSAhaW1wb3J0YW50O1xuICAgICAgICBsZXR0ZXItc3BhY2luZzogMDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDE5cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDUwcHg7XG4gICAgICAgIG9wYWNpdHk6IDAuODtcbiAgICB9XG5cbiAgICAuYnV0dG9uLmJ0bi5idXR0b24tYmxvY2sge1xuICAgICAgICBtYXJnaW4tdG9wOiAyNXB4O1xuICAgIH1cblxuICAgIGlvbi1saXN0IHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjhweDtcbiAgICB9XG5cbiAgICBoNCB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgZm9udC1zaXplOiAxcmVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgIH1cbn1cblxuaW9uLWZvb3RlciB7XG4gICAgLmZvcm0ge1xuICAgICAgICBwYWRkaW5nLXRvcDogMHB4ICFpbXBvcnRhbnQ7XG4gICAgfVxufVxuIiwiLmZvcm0ge1xuICBwYWRkaW5nLXRvcDogNTBweDtcbn1cbi5mb3JtIGlvbi1pdGVtIHtcbiAgYmFja2dyb3VuZDogdmFyKC0taW5mb19maWVsZF9iZyk7XG59XG4uZm9ybSBpb24taXRlbS5pdGVtLWlucHV0IGlvbi1sYWJlbCB7XG4gIG1heC13aWR0aDogdW5zZXQgIWltcG9ydGFudDtcbiAgd2lkdGg6IGZpdC1jb250ZW50ICFpbXBvcnRhbnQ7XG4gIG1pbi13aWR0aDogZml0LWNvbnRlbnQ7XG59XG4uZm9ybSBpb24taXRlbS5pdGVtLXNlbGVjdCB7XG4gIHBhZGRpbmc6IDJweCAxM3B4O1xufVxuLmZvcm0gaW9uLWl0ZW0uaXRlbS1zZWxlY3QgaW9uLWxhYmVsIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cbi5mb3JtIHAge1xuICBjb2xvcjogdmFyKC0tdGV4dC1saWdodCkgIWltcG9ydGFudDtcbiAgbWFyZ2luOiAwO1xuICBmb250LXNpemU6IDFyZW0gIWltcG9ydGFudDtcbiAgbGV0dGVyLXNwYWNpbmc6IDA7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGxpbmUtaGVpZ2h0OiAxOXB4O1xuICBtYXJnaW4tYm90dG9tOiA1MHB4O1xuICBvcGFjaXR5OiAwLjg7XG59XG4uZm9ybSAuYnV0dG9uLmJ0bi5idXR0b24tYmxvY2sge1xuICBtYXJnaW4tdG9wOiAyNXB4O1xufVxuLmZvcm0gaW9uLWxpc3Qge1xuICBtYXJnaW4tYm90dG9tOiAyOHB4O1xufVxuLmZvcm0gaDQge1xuICBtYXJnaW46IDA7XG4gIGZvbnQtc2l6ZTogMXJlbTtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbn1cblxuaW9uLWZvb3RlciAuZm9ybSB7XG4gIHBhZGRpbmctdG9wOiAwcHggIWltcG9ydGFudDtcbn0iXX0= */\";","import { Component, OnInit } from '@angular/core';\nimport { NavController, AlertController } from '@ionic/angular';\nimport { SignUpRequest } from 'src/models/auth-signup-request.models';\nimport { UiElementsService } from '../services/common/ui-elements.service';\nimport { ApiService } from '../services/network/api.service';\nimport { ActivatedRoute, NavigationExtras } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Helper } from 'src/models/helper.models';\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.page.html',\n  styleUrls: ['./register.page.scss']\n})\nexport class RegisterPage implements OnInit {\n  countries: any;\n  phoneNumber: string;\n  countryCode: string;\n  countryCodeCountryText: string;\n  phoneNumberFull: string;\n  phoneNumberHint: string;\n  signUpRequest = new SignUpRequest();\n\n  constructor(private navCtrl: NavController, private uiElementService: UiElementsService,\n    private apiService: ApiService, private route: ActivatedRoute,\n    private translate: TranslateService, private alertCtrl: AlertController) { }\n\n  ngOnInit() {\n    this.changeHint();\n    this.route.queryParams.subscribe(params => {\n      let code = params[\"code\"];\n      let phone = params[\"phone\"];\n      let name = params[\"name\"];\n      let email = params[\"email\"];\n      if (code && code.length) this.countryCode = code;\n      if (phone && phone.length) this.phoneNumber = phone;\n      if (name && name.length) this.signUpRequest.name = name;\n      if (email && email.length) this.signUpRequest.email = email;\n\n      this.apiService.getCountries().subscribe(res => { this.countries = res; this.countryCode = this.countryCode; this.changeHint(true); });\n    });\n    this.apiService.getCountries().subscribe(res => { this.countries = res; this.changeHint(true); });\n  }\n\n  changeHint(clearPhoneSkip?: boolean) {\n    this.phoneNumber = clearPhoneSkip ? this.phoneNumber : \"\";\n    if (this.countryCode && this.countryCode.length) {\n      for (let country of this.countries) if (country.callingCodes[0] && country.callingCodes[0] == this.countryCode) this.countryCodeCountryText = country.name;\n      this.translate.get('enter_phone_number_exluding').subscribe(value => this.phoneNumberHint = (value + \" (+\" + this.countryCode + \")\"));\n    } else {\n      this.translate.get('enter_phone_number').subscribe(value => this.phoneNumberHint = value);\n    }\n  }\n\n  requestSignUp() {\n    var reg = /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/;\n    if (this.signUpRequest.name.length < 2) {\n      this.translate.get(\"err_valid_name\").subscribe(value => this.uiElementService.presentToast(value));\n    } else if (this.signUpRequest.email.length <= 5 || !reg.test(this.signUpRequest.email)) {\n      this.translate.get(\"err_valid_email\").subscribe(value => this.uiElementService.presentToast(value));\n    } else if (!this.countryCode || !this.countryCode.length || !this.phoneNumber || !this.phoneNumber.length) {\n      this.translate.get(\"err_valid_phone\").subscribe(value => this.uiElementService.presentToast(value));\n    } else {\n      this.alertPhone();\n    }\n  }\n\n  alertPhone() {\n    this.translate.get(['alert_phone', 'no', 'yes']).subscribe(text => {\n      this.phoneNumberFull = \"+\" + this.countryCode + Helper.formatPhone(this.phoneNumber);\n      this.alertCtrl.create({\n        header: this.phoneNumberFull,\n        message: text['alert_phone'],\n        buttons: [{\n          text: text['no'],\n          role: 'cancel',\n          handler: () => {\n            console.log('Cancel clicked');\n          }\n        }, {\n          text: text['yes'],\n          handler: () => {\n            this.signUpRequest.password = String(Math.floor(100000 + Math.random() * 900000));\n            this.signUpRequest.mobile_number = this.phoneNumberFull;\n            this.signUp();\n          }\n        }]\n      }).then(alert => alert.present());\n    });\n  }\n\n  signUp() {\n    this.translate.get('signing_up').subscribe(value => {\n      this.uiElementService.presentLoading(value);\n\n      this.apiService.createUser(this.signUpRequest).subscribe(res => {\n        console.log(res);\n        this.uiElementService.dismissLoading();\n\n        let navigationExtras: NavigationExtras = { queryParams: { phoneNumberFull: res.user.mobile_number } };\n        this.navCtrl.navigateForward(['./verification'], navigationExtras);\n      }, err => {\n        console.log(err);\n        this.uiElementService.dismissLoading();\n        let errMsg;\n        this.translate.get(['invalid_credentials', 'invalid_credential_email', 'invalid_credential_phone', 'invalid_credential_password']).subscribe(value => {\n          errMsg = value['invalid_credentials'];\n          if (err && err.error && err.error.errors) {\n            if (err.error.errors.email) {\n              errMsg = value['invalid_credential_email'];\n            } else if (err.error.errors.mobile_number) {\n              errMsg = value['invalid_credential_phone'];\n            } else if (err.error.errors.password) {\n              errMsg = value['invalid_credential_password'];\n            }\n          }\n          this.uiElementService.presentErrorAlert(errMsg);\n        });\n      });\n    });\n  }\n\n  goBack() {\n    this.navCtrl.pop();\n  }\n\n  // pickImage() {\n  //   this.translate.get([\"image_pic_header\", \"image_pic_subheader\", \"image_pic_camera\", \"image_pic_gallery\"]).subscribe(values => {\n  //     this.alertCtrl.create({\n  //       header: values[\"image_pic_header\"],\n  //       message: values[\"image_pic_subheader\"],\n  //       buttons: [{\n  //         text: values[\"image_pic_camera\"],\n  //         handler: () => {\n  //           this.getImageCamera();\n  //         }\n  //       }, {\n  //         text: values[\"image_pic_gallery\"],\n  //         handler: () => {\n  //           this.getImageGallery();\n  //         }\n  //       }]\n  //     }).then(alert => alert.present());\n  //   });\n  // }\n\n  // getImageGallery() {\n  //   this.platform.ready().then(() => {\n  //     if (this.platform.is(\"cordova\")) {\n  //       this.imagePicker.getPictures({\n  //         maximumImagesCount: 1,\n  //       }).then((results) => {\n  //         if (results && results[0]) {\n  //           this.reduceImages(results).then(() => {\n  //             console.log('cropped_images');\n  //           });\n  //         }\n  //       }, (err) => {\n  //         console.log(\"getPictures\", JSON.stringify(err));\n  //       });\n  //     }\n  //   });\n  // }\n\n  // reduceImages(selected_pictures: any): any {\n  //   return selected_pictures.reduce((promise: any, item: any) => {\n  //     return promise.then((result) => {\n  //       return this.cropService.crop(item, { quality: 100 }).then(cropped_image => this.uploadImage(cropped_image));\n  //     });\n  //   }, Promise.resolve());\n  // }\n\n  // getImageCamera() {\n  //   const options: CameraOptions = {\n  //     quality: 75,\n  //     destinationType: this.platform.is(\"android\") ? this.camera.DestinationType.FILE_URI : this.camera.DestinationType.NATIVE_URI,\n  //     encodingType: this.camera.EncodingType.JPEG,\n  //     mediaType: this.camera.MediaType.PICTURE\n  //   }\n  //   this.camera.getPicture(options).then((imageData) => this.uploadImage(imageData), (err) => {\n  //     this.translate.get('camera_err').subscribe(value => this.uiElementService.presentToast(value));\n  //     console.log(\"getPicture\", JSON.stringify(err));\n  //   });\n  // }\n\n  // uploadImage(imageUri) {\n  //   this.translate.get([\"uploading_image\", \"uploading_fail\"]).subscribe(values => {\n  //     this.uiElementService.presentLoading(values[\"uploading_image\"]);\n  //     this.fireUpService.resolveUriAndUpload(imageUri).then(res => {\n  //       console.log(\"resolveUriAndUpload\", res);\n  //       this.uiElementService.dismissLoading();\n  //       this.signUpRequest.image_url = String(res);\n  //     }, err => {\n  //       console.log(\"resolveUriAndUpload\", err);\n  //       this.uiElementService.dismissLoading();\n  //       this.uiElementService.presentErrorAlert(values[\"uploading_fail\"]);\n  //     });\n  //   });\n  // }\n\n}","import { Constants } from './constants.models';\n\nexport class SignUpRequest {\n    name: string;\n    email: string;\n    password: string;\n    mobile_number: string;\n    image_url: string;\n    role: string;\n\n    constructor() {\n        this.name = \"\";\n        this.email = \"\";\n        this.password = \"\";\n        this.mobile_number = \"\";\n        this.role = Constants.ROLE_DELIVERY;\n    }\n}"]}
{"version":3,"sources":["webpack:///src/app/verification/verification.page.html","webpack:///src/app/verification/verification-routing.module.ts","webpack:///src/app/verification/verification.module.ts","webpack:///src/app/verification/verification.page.scss","webpack:///src/app/verification/verification.page.ts"],"names":["routes","path","component","VerificationPageRoutingModule","imports","forChild","exports","VerificationPageModule","declarations","VerificationPage","route","uiElementService","myEvent","platform","apiService","translate","navCtrl","captchanotvarified","buttonDisabled","captchaVerified","minutes","seconds","totalSeconds","intervalCalled","resendCode","otpNotSent","otp","queryParams","subscribe","params","phoneNumberFull","is","makeCaptcha","sendOTP","token","get","value","presentLoading","loginUser","role","ROLE_DELIVERY","res","dismissLoading","setLoginData","pop","err","console","log","presentErrorAlert","error","message","String","toLowerCase","includes","user","getIdToken","then","sendOtpPhone","sendOtpBrowser","clearInterval","timer","createTimer","setInterval","phone","window","FirebasePlugin","verifyPhoneNumber","credential","JSON","stringify","instantVerification","presentToast","verifyOtpPhone","createInterval","text","signInWithPhoneNumber","recaptchaVerifier","confirmationResult","result","code","verifyOtpBrowser","signInAndRetrieveDataWithCredential","info","getUserToken","signInWithCredential","getCurrentUser","idToken","retryOld","PhoneAuthProvider","id","confirm","response","RecaptchaVerifier","render","selector","template"],"mappings":"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","file":"verification-verification-module-es5.js","sourcesContent":["export default \"<ion-header>\\n\\t<ion-toolbar>\\n\\t\\t<ion-buttons slot=\\\"start\\\">\\n\\t\\t\\t<ion-back-button text=\\\"\\\" icon=\\\"chevron-back-outline\\\"></ion-back-button>\\n\\t\\t</ion-buttons>\\n\\t\\t<ion-title>{{'phone_verification' | translate}}</ion-title>\\n\\t</ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\t<div id=\\\"recaptcha-container\\\"></div>\\n\\t<div class=\\\"form\\\">\\n\\t\\t<p class=\\\"ion-text-center\\\">{{'verification_text' | translate}} {{phoneNumberFull}} </p>\\n\\n\\t\\t<ion-list lines=\\\"none\\\">\\n\\t\\t\\t<ion-item lines=\\\"none\\\">\\n\\t\\t\\t\\t<ion-input class=\\\"ion-text-center\\\" type=\\\"number\\\" [(ngModel)]=\\\"otp\\\"\\n\\t\\t\\t\\t\\tplaceholder=\\\"{{'enter_verification_code' | translate}}\\\">\\n\\t\\t\\t\\t</ion-input>\\n\\t\\t\\t</ion-item>\\n\\n\\t\\t\\t<ion-button size=\\\"large\\\" shape=\\\"block\\\" class=\\\"btn\\\" (click)=\\\"verify()\\\">\\n\\t\\t\\t\\t{{'verify' | translate}}\\n\\t\\t\\t</ion-button>\\n\\t\\t</ion-list>\\n\\t\\t<!-- <h4 class=\\\"d-flex\\\">0:22 min left <span class=\\\"end\\\">{{'resend' | translate}}</span></h4> -->\\n\\t</div>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { VerificationPage } from './verification.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: VerificationPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class VerificationPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { VerificationPageRoutingModule } from './verification-routing.module';\n\nimport { VerificationPage } from './verification.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n\tTranslateModule,  \n    VerificationPageRoutingModule\n  ],\n  declarations: [VerificationPage]\n})\nexport class VerificationPageModule {}\n","export default \"ion-header ion-toolbar ion-title {\\n  position: absolute !important;\\n  left: 0;\\n  top: 0;\\n  width: 100%;\\n  text-align: center;\\n  padding: 0 15px !important;\\n}\\n\\n.form {\\n  padding-top: 50px;\\n}\\n\\n.form p {\\n  color: var(--text-light) !important;\\n  margin: 0;\\n  font-size: 1rem !important;\\n  letter-spacing: 0;\\n  font-weight: 500;\\n  line-height: 19px;\\n  margin-bottom: 50px;\\n  opacity: 0.8;\\n}\\n\\n.form .button.btn.button-block {\\n  margin-top: 25px;\\n}\\n\\n.form ion-list {\\n  margin-bottom: 28px;\\n}\\n\\n.form h4 {\\n  margin: 0;\\n  font-size: 0.95rem;\\n  font-weight: 500;\\n}\\n\\n.form h4 span {\\n  text-transform: uppercase;\\n  font-size: 0.95rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmVyaWZpY2F0aW9uL0Y6XFxmaXZlclxcQmVybmFyZFxcQWdvY2FycnlcXGFnb2NhcnJ5LWRlbGl2ZXJ5L3NyY1xcYXBwXFx2ZXJpZmljYXRpb25cXHZlcmlmaWNhdGlvbi5wYWdlLnNjc3MiLCJzcmMvYXBwL3ZlcmlmaWNhdGlvbi92ZXJpZmljYXRpb24ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksNkJBQUE7RUFDQSxPQUFBO0VBQ0EsTUFBQTtFQUNBLFdBQUE7RUFDQSxrQkFBQTtFQUNBLDBCQUFBO0FDQ0o7O0FERUE7RUFDSSxpQkFBQTtBQ0NKOztBRENJO0VBQ0ksbUNBQUE7RUFDQSxTQUFBO0VBQ0EsMEJBQUE7RUFDQSxpQkFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7QUNDUjs7QURFSTtFQUNJLGdCQUFBO0FDQVI7O0FER0k7RUFDSSxtQkFBQTtBQ0RSOztBRElJO0VBQ0ksU0FBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7QUNGUjs7QURJUTtFQUNJLHlCQUFBO0VBQ0Esa0JBQUE7QUNGWiIsImZpbGUiOiJzcmMvYXBwL3ZlcmlmaWNhdGlvbi92ZXJpZmljYXRpb24ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWhlYWRlciBpb24tdG9vbGJhciBpb24tdGl0bGUge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50O1xuICAgIGxlZnQ6IDA7XG4gICAgdG9wOiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBwYWRkaW5nOiAwIDE1cHggIWltcG9ydGFudDtcbn1cblxuLmZvcm0ge1xuICAgIHBhZGRpbmctdG9wOiA1MHB4O1xuXG4gICAgcCB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWxpZ2h0KSAhaW1wb3J0YW50O1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMXJlbSAhaW1wb3J0YW50O1xuICAgICAgICBsZXR0ZXItc3BhY2luZzogMDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDE5cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDUwcHg7XG4gICAgICAgIG9wYWNpdHk6IC44O1xuICAgIH1cblxuICAgIC5idXR0b24uYnRuLmJ1dHRvbi1ibG9jayB7XG4gICAgICAgIG1hcmdpbi10b3A6IDI1cHg7XG4gICAgfVxuXG4gICAgaW9uLWxpc3Qge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyOHB4O1xuICAgIH1cblxuICAgIGg0IHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBmb250LXNpemU6IC45NXJlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcblxuICAgICAgICBzcGFuIHtcbiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICAgICAgICBmb250LXNpemU6IC45NXJlbTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpb24taGVhZGVyIGlvbi10b29sYmFyIGlvbi10aXRsZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50O1xuICBsZWZ0OiAwO1xuICB0b3A6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAgMTVweCAhaW1wb3J0YW50O1xufVxuXG4uZm9ybSB7XG4gIHBhZGRpbmctdG9wOiA1MHB4O1xufVxuLmZvcm0gcCB7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LWxpZ2h0KSAhaW1wb3J0YW50O1xuICBtYXJnaW46IDA7XG4gIGZvbnQtc2l6ZTogMXJlbSAhaW1wb3J0YW50O1xuICBsZXR0ZXItc3BhY2luZzogMDtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgbGluZS1oZWlnaHQ6IDE5cHg7XG4gIG1hcmdpbi1ib3R0b206IDUwcHg7XG4gIG9wYWNpdHk6IDAuODtcbn1cbi5mb3JtIC5idXR0b24uYnRuLmJ1dHRvbi1ibG9jayB7XG4gIG1hcmdpbi10b3A6IDI1cHg7XG59XG4uZm9ybSBpb24tbGlzdCB7XG4gIG1hcmdpbi1ib3R0b206IDI4cHg7XG59XG4uZm9ybSBoNCB7XG4gIG1hcmdpbjogMDtcbiAgZm9udC1zaXplOiAwLjk1cmVtO1xuICBmb250LXdlaWdodDogNTAwO1xufVxuLmZvcm0gaDQgc3BhbiB7XG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gIGZvbnQtc2l6ZTogMC45NXJlbTtcbn0iXX0= */\";","import { Component, OnInit } from '@angular/core';\nimport { Platform, NavController } from '@ionic/angular'\nimport { ActivatedRoute } from '@angular/router';\nimport { UiElementsService } from '../services/common/ui-elements.service';\nimport { MyEventsService } from '../services/events/my-events.service';\nimport { ApiService } from '../services/network/api.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Helper } from 'src/models/helper.models';\nimport * as firebase from 'firebase/app';\nimport { Constants } from 'src/models/constants.models';\n\n@Component({\n  selector: 'app-verification',\n  templateUrl: './verification.page.html',\n  styleUrls: ['./verification.page.scss']\n})\nexport class VerificationPage implements OnInit {\n  private recaptchaVerifier: firebase.auth.RecaptchaVerifier;\n  private captchanotvarified: boolean = true;\n  private result: any;\n  private buttonDisabled: any = true;\n  private component: any;\n  private captchaVerified: boolean = false;\n  private verfificationId: any;\n  private timer: any;\n  private minutes: number = 0;\n  private seconds: number = 0;\n  private totalSeconds: number = 0;\n  private intervalCalled: boolean = false;\n  private dialCode: string;\n  private resendCode: boolean = false;\n  private otpNotSent: boolean = true;\n  private credential: any;\n\n  phoneNumberFull: string;\n  otp = \"\";\n\n  constructor(private route: ActivatedRoute, private uiElementService: UiElementsService, private myEvent: MyEventsService,\n    private platform: Platform, private apiService: ApiService, private translate: TranslateService, private navCtrl: NavController) {\n    this.route.queryParams.subscribe(params => this.phoneNumberFull = params[\"phoneNumberFull\"]);\n  }\n\n  ngOnInit() {\n    if (!(this.platform.is('cordova'))) {\n      this.makeCaptcha();\n    }\n    this.sendOTP();\n  }\n\n  loginUser(token) {\n    this.translate.get('just_moment').subscribe(value => {\n      this.uiElementService.presentLoading(value);\n\n      this.apiService.loginUser({ token: token, role: Constants.ROLE_DELIVERY }).subscribe(res => {\n        this.uiElementService.dismissLoading();\n        this.myEvent.setLoginData(res);\n        this.navCtrl.pop();\n      }, err => {\n        console.log(err);\n        this.uiElementService.dismissLoading();\n        this.uiElementService.presentErrorAlert((err && err.error && err.error.message && String(err.error.message).toLowerCase().includes(\"role\")) ? \"User exists with different role\" : \"Something went wrong\");\n      });\n    });\n  }\n\n  getUserToken(user) {\n    user.getIdToken(false).then(res => {\n      console.log('user_token_success', res);\n      this.loginUser(res);\n    }).catch(err => {\n      console.log('user_token_failure', err);\n    });\n  }\n\n  sendOTP() {\n    this.resendCode = false;\n    this.otpNotSent = true;\n    if (this.platform.is('cordova')) {\n      this.sendOtpPhone(this.phoneNumberFull);\n    } else {\n      this.sendOtpBrowser(this.phoneNumberFull);\n    }\n    if (this.intervalCalled) {\n      clearInterval(this.timer);\n    }\n  }\n\n  createTimer() {\n    this.intervalCalled = true;\n    this.totalSeconds--;\n    if (this.totalSeconds == 0) {\n      this.otpNotSent = true;\n      this.resendCode = true;\n      clearInterval(this.timer);\n    } else {\n      this.seconds = (this.totalSeconds % 60);\n      if (this.totalSeconds >= this.seconds) {\n        this.minutes = (this.totalSeconds - this.seconds) / 60\n      } else {\n        this.minutes = 0;\n      }\n    }\n  }\n\n  createInterval() {\n    this.totalSeconds = 120;\n    this.createTimer();\n    this.timer = setInterval(() => {\n      this.createTimer();\n    }, 1000);\n  }\n\n  sendOtpPhone(phone) {\n    const component = this;\n    this.translate.get('sending_otp').subscribe(value => {\n      this.uiElementService.presentLoading(value);\n\n      (<any>window).FirebasePlugin.verifyPhoneNumber(function (credential) {\n        component.uiElementService.dismissLoading();\n        console.log(\"verifyPhoneNumber\", JSON.stringify(credential));\n        //component.verfificationId = credential.instantVerification ? credential.id : credential.verificationId;\n        component.credential = credential;\n        if (credential.instantVerification) {\n          component.translate.get(\"verifying_otp_auto\").subscribe(value => component.uiElementService.presentToast(value));\n          component.verifyOtpPhone();\n        } else {\n          component.translate.get(\"sending_otp_success\").subscribe(value => component.uiElementService.presentToast(value));\n          component.otpNotSent = false;\n          component.createInterval();\n        }\n        // component.translate.get(\"otp_sent\").subscribe(value => {\n        //   component.global.showToast(value);\n        // });\n        // component.otpNotSent = false;\n        // component.createInterval(); \n      }, function (error) {\n        console.log(\"otp_send_fail\", error);\n        component.otpNotSent = true;\n        component.resendCode = true;\n        component.uiElementService.dismissLoading();\n        component.translate.get('sending_otp_fail').subscribe(text => component.uiElementService.presentToast(text));\n      }, phone, 60);\n    });\n  }\n\n  sendOtpBrowser(phone) {\n    const component = this;\n    this.uiElementService.dismissLoading();\n    this.uiElementService.presentLoading(\"Sending otp\");\n    firebase.auth().signInWithPhoneNumber(phone, this.recaptchaVerifier).then((confirmationResult) => {\n      console.log(\"otp_send_success\", confirmationResult);\n      component.otpNotSent = false;\n      component.result = confirmationResult;\n      component.uiElementService.dismissLoading();\n      component.uiElementService.presentToast(\"OTP Sent\");\n      if (component.intervalCalled) {\n        clearInterval(component.timer);\n      }\n      component.createInterval();\n    }).catch(function (error) {\n      console.log(\"otp_send_fail\", error);\n      component.resendCode = true;\n      component.uiElementService.dismissLoading();\n      if (error.message) {\n        component.uiElementService.presentToast(error.message);\n      } else {\n        component.uiElementService.presentToast(\"OTP Sending failed\");\n      }\n    });\n  }\n\n  verify() {\n    this.otpNotSent = true;\n    if (this.platform.is('cordova')) {\n      this.credential.code = String(this.otp);\n      this.verifyOtpPhone();\n    } else {\n      this.verifyOtpBrowser();\n    }\n  }\n\n  retryOld(credential) {\n    //const credential = firebase.auth.PhoneAuthProvider.credential(this.verfificationId, this.otp);\n    this.translate.get('verifying_otp').subscribe(value => {\n      this.uiElementService.presentLoading(value);\n\n      firebase.auth().signInAndRetrieveDataWithCredential(credential).then((info) => {\n        console.log('otp_verify_success', info);\n        this.uiElementService.dismissLoading();\n        this.translate.get('verifying_otp_success').subscribe(value => this.uiElementService.presentToast(value));\n        this.getUserToken(info.user);\n      }, (error) => {\n        console.log('otp_verify_fail', error);\n        this.translate.get('verifying_otp_fail').subscribe(value => this.uiElementService.presentToast(value));\n        this.uiElementService.dismissLoading();\n      })\n    });\n  }\n\n  verifyOtpPhone() {\n    const component = this;\n    this.translate.get('verifying_otp').subscribe(text => {\n      this.uiElementService.presentLoading(text);\n      console.log(\"credential\", component.credential);\n      (<any>window).FirebasePlugin.signInWithCredential(component.credential, function () {\n        console.log(\"signInWithCredential\");\n        (<any>window).FirebasePlugin.getCurrentUser(function (user) {\n          component.uiElementService.dismissLoading();\n          console.log(\"getCurrentUser\", JSON.stringify(user));\n          component.translate.get('otp_verified').subscribe(text => component.uiElementService.presentToast(text));\n          component.loginUser(user.idToken);\n        }, function (error) {\n          component.uiElementService.dismissLoading();\n          console.log(\"getCurrentUser\", JSON.stringify(error));\n          component.translate.get('verify_otp_err').subscribe(text => component.uiElementService.presentToast(text));\n        });\n      }, function (error) {\n        console.error(\"signInWithCredential\", error);\n        component.uiElementService.dismissLoading();\n        component.retryOld(firebase.auth.PhoneAuthProvider.credential(component.credential.id, component.otp));\n        component.translate.get('verify_otp_err').subscribe(text => component.uiElementService.presentToast(text));\n      });\n    });\n  }\n\n  verifyOtpBrowser() {\n    const component = this;\n    this.uiElementService.presentLoading(\"Verifying otp\");\n    this.result.confirm(String(this.otp)).then(function (response) {\n      console.log('otp_verify_success', response);\n      component.uiElementService.dismissLoading();\n      component.uiElementService.presentToast(\"OTP Verified\");\n      component.getUserToken(response.user);\n    }).catch(function (error) {\n      console.log('otp_verify_fail', error);\n      if (error.message) {\n        component.uiElementService.presentToast(error.message);\n      } else {\n        component.uiElementService.presentToast(\"OTP Verification failed\");\n      }\n      component.uiElementService.dismissLoading();\n    });\n  }\n\n  makeCaptcha() {\n    const component = this;\n    this.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {\n      // 'size': 'normal',\n      'size': 'invisible',\n      'callback': function (response) {\n        component.captchanotvarified = true;\n        // reCAPTCHA solved, allow signInWithPhoneNumber.\n      }\n    });\n    this.recaptchaVerifier.render();\n  }\n\n}\n"]}